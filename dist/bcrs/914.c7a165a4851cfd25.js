"use strict";(self.webpackChunkbcrs=self.webpackChunkbcrs||[]).push([[914],{3914:(he,p,u)=>{u.r(p),u.d(p,{SecurityModule:()=>Ze});var c=u(6814),o=u(95),f=u(9862),_=u(2296),l=u(157),e=u(5879);let g=(()=>{var r;class s{constructor(i){this.http=i}signin(i,t){return this.http.post("/api/security/signin",{email:i,password:t})}register(i){return this.http.post("/api/security/register",{user:i})}verifyEmail(i){return this.http.post("/api/security/verify/users/"+i,{})}findSelectedSecurityQuestions(i){return this.http.get("/api/users/"+i+"/security-questions")}verifySecurityQuestions(i,t){return this.http.post("/api/security/verify/users/"+i+"/security-questions",{securityQuestions:t})}changePassword(i,t){return this.http.post("/api/security/users/"+i+"/reset-password",{password:t})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.LFG(f.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();function v(r,s){if(1&r&&(e.TgZ(0,"div")(1,"div",41),e._uU(2),e._UZ(3,"button",42),e.qZA()()),2&r){const n=e.oxw();e.xp6(2),e.hij(" ",n.errorMessage," ")}}function b(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," First name is required. "),e._UZ(4,"button",42),e.qZA()())}function Z(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Last name is required. "),e._UZ(4,"button",42),e.qZA()())}function h(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Address is required. "),e._UZ(4,"button",42),e.qZA()())}function y(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Phone Number is required. "),e._UZ(4,"button",42),e.qZA()())}function q(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Phone Number must not contain any letters and must be in format: 555-111-5555 or 5551115555 "),e._UZ(4,"button",42),e.qZA()())}function w(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Email is required. "),e._UZ(4,"button",42),e.qZA()())}function T(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Please enter a valid email address. "),e._UZ(4,"button",42),e.qZA()())}function U(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Password is required. "),e._UZ(4,"button",42),e.qZA()())}function A(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," The password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one number. "),e._UZ(4,"button",42),e.qZA()())}function C(r,s){if(1&r&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&r){const n=s.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function F(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Question is required. "),e._UZ(4,"button",42),e.qZA()())}function S(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Answer is required. "),e._UZ(4,"button",42),e.qZA()())}function N(r,s){if(1&r&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&r){const n=s.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function I(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Question is required. "),e._UZ(4,"button",42),e.qZA()())}function Q(r,s){1&r&&(e.TgZ(0,"div",43),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Answer is required. "),e._UZ(4,"button",42),e.qZA()())}function x(r,s){if(1&r&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&r){const n=s.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function k(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Question is required. "),e._UZ(4,"button",42),e.qZA()())}function J(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",41),e._uU(3," Answer is required. "),e._UZ(4,"button",42),e.qZA()())}let Y=(()=>{var r;class s{constructor(i,t,a){this.router=i,this.fb=t,this.securityService=a,this.registerForm=this.fb.group({firstName:["",o.kI.compose([o.kI.required])],lastName:["",o.kI.compose([o.kI.required])],email:["",o.kI.compose([o.kI.required,o.kI.email])],question1:["",o.kI.compose([o.kI.required])],question2:["",o.kI.compose([o.kI.required])],question3:["",o.kI.compose([o.kI.required])],answer1:["",o.kI.compose([o.kI.required])],answer2:["",o.kI.compose([o.kI.required])],answer3:["",o.kI.compose([o.kI.required])],phoneNumber:["",o.kI.compose([o.kI.required,o.kI.pattern("^[0-9-]*$")])],address:["",o.kI.compose([o.kI.required])],password:["",o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.securityQuestions=["What is your mother's middle name?","What is the name of your first pet?","What is your favorite color?","What is your favorite movie?","What is your favorite fast food?","What is your favorite song?"],this.qArr1=this.securityQuestions,this.qArr2=[],this.qArr3=[],this.user={},this.errorMessage=""}ngOnInit(){this.registerForm.get("question1")?.valueChanges.subscribe(i=>{console.log("Value changed from question 1",i),this.qArr2=this.qArr1.filter(t=>t!==i)}),this.registerForm.get("question2")?.valueChanges.subscribe(i=>{console.log("Value changed from question 2",i),this.qArr3=this.qArr2.filter(t=>t!==i)})}register(){this.user={firstName:this.registerForm.get("firstName")?.value,lastName:this.registerForm.get("lastName")?.value,email:this.registerForm.get("email")?.value,password:this.registerForm.get("password")?.value,address:this.registerForm.get("address")?.value,role:"standard",isDisabled:!1,phoneNumber:this.registerForm.get("phoneNumber")?.value,selectedSecurityQuestions:[{question:this.registerForm.get("question1")?.value,answer:this.registerForm.get("answer1")?.value},{question:this.registerForm.get("question2")?.value,answer:this.registerForm.get("answer2")?.value},{question:this.registerForm.get("question3")?.value,answer:this.registerForm.get("answer3")?.value}]},console.log("Registering new user",this.user),this.securityService.register(this.user).subscribe({next:i=>{console.log("Result from Register API Call: ",i),this.router.navigate(["/security/signin"])},error:i=>{i.error.message?(console.log("db error: ",i.error.message),this.errorMessage=i.error.message):(this.errorMessage="Something went wrong. Please contact the system administrator.",console.log(i))}})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.Y36(l.F0),e.Y36(o.qu),e.Y36(g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:114,vars:21,consts:[[1,"container-fluid","pt-2","p-2"],[1,"row","justify-content-center","pt-4"],[1,"col-sm-10","col-md-8","col-lg-6"],[1,"text-center","bg-potter-yellow"],["src","./assets/registration-logo.png","width","80%","alt","Logo displaying a computer with text next to it that says Registration - Make A New Account"],[4,"ngIf"],[1,"card","bg-black","font-yellow"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-md-6"],["for","txtFirstName"],["type","text","id","txtFirstName","formControlName","firstName","required","",1,"form-control","bg-potter-yellow"],["for","txtLastName"],["type","text","id","txtLastName","formControlName","lastName","required","",1,"form-control","bg-potter-yellow"],["class","col-md-12",4,"ngIf"],["for","txtAddress"],["type","text","id","txtAddress","formControlName","address","required","",1,"form-control","bg-potter-yellow"],["for","txtPhoneNumber"],["type","text","id","txtPhoneNumber","placeholder","format: 555-111-5555 or 5551115555","formControlName","phoneNumber","required","",1,"form-control","bg-potter-yellow"],["for","txtEmail"],["type","text","id","txtEmail","formControlName","email","required","",1,"form-control","bg-potter-yellow"],["for","txtPassword"],["type","password","id","txtPassword","formControlName","password","required","",1,"form-control","bg-potter-yellow"],["for","q1"],["name","q1","formControlName","question1","id","q1",1,"form-select","bg-potter-yellow"],[3,"value",4,"ngFor","ngForOf"],["for","a1"],["type","text","name","a1","formControlName","answer1","id","a1",1,"form-control","bg-potter-yellow"],["for","q2"],["name","q2","formControlName","question2","id","q2",1,"form-select","bg-potter-yellow"],["for","a2"],["type","text","name","a2","formControlName","answer2","id","a2",1,"form-control","bg-potter-yellow"],["for","q3"],["name","q3","formControlName","question3","id","q3",1,"form-select","bg-potter-yellow"],["for","a3"],["type","text","name","a3","formControlName","answer3","id","a3",1,"form-control","bg-potter-yellow"],["type","submit","id","submit","value","Submit",1,"btn","bg-potter-yellow","text-black","extra-width",3,"disabled"],["routerLink","/"],[1,"btn","bg-black","font-yellow"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],[1,"col-md-12"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e._UZ(5,"hr"),e.YNc(6,v,4,1,"div",5),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return t.register()}),e.TgZ(10,"fieldset",9)(11,"legend"),e._uU(12,"Enter Your Information:"),e.qZA(),e._UZ(13,"br")(14,"br"),e.TgZ(15,"div",10),e._UZ(16,"br"),e.TgZ(17,"div",11)(18,"label",12),e._uU(19,"First Name:"),e.qZA(),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"div",11)(22,"label",14),e._uU(23,"Last Name:"),e.qZA(),e._UZ(24,"input",15),e.qZA(),e.YNc(25,b,5,0,"div",16),e.YNc(26,Z,5,0,"div",16),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"div",10)(29,"div",11)(30,"label",17),e._uU(31,"Address:"),e.qZA(),e._UZ(32,"input",18),e.qZA(),e.TgZ(33,"div",11)(34,"label",19),e._uU(35,"Phone Number:"),e.qZA(),e._UZ(36,"input",20),e.qZA(),e.YNc(37,h,5,0,"div",16),e.YNc(38,y,5,0,"div",16),e.YNc(39,q,5,0,"div",16),e.qZA(),e._UZ(40,"br"),e.TgZ(41,"div",10)(42,"div",11)(43,"label",21),e._uU(44,"Email:"),e.qZA(),e._UZ(45,"input",22),e.qZA(),e.TgZ(46,"div",11)(47,"label",23),e._uU(48,"Password:"),e.qZA(),e._UZ(49,"input",24),e.qZA(),e.YNc(50,w,5,0,"div",16),e.YNc(51,T,5,0,"div",16),e.YNc(52,U,5,0,"div",5),e.YNc(53,A,5,0,"div",5),e.qZA(),e._UZ(54,"br"),e.TgZ(55,"legend"),e._uU(56,"Security Questions:"),e.qZA(),e.TgZ(57,"div",10)(58,"div",11)(59,"label",25),e._uU(60,"Question:"),e.qZA(),e.TgZ(61,"select",26),e.YNc(62,C,2,2,"option",27),e.qZA()(),e.TgZ(63,"div",11)(64,"label",28),e._uU(65,"Answer:"),e.qZA(),e._UZ(66,"input",29),e.qZA(),e.YNc(67,F,5,0,"div",16),e.YNc(68,S,5,0,"div",16),e.qZA(),e._UZ(69,"br"),e.TgZ(70,"div",10)(71,"div",11)(72,"label",30),e._uU(73,"Question:"),e.qZA(),e.TgZ(74,"select",31),e.YNc(75,N,2,2,"option",27),e.qZA()(),e.TgZ(76,"div",11)(77,"label",32),e._uU(78,"Answer:"),e.qZA(),e._UZ(79,"input",33),e.qZA(),e.YNc(80,I,5,0,"div",16),e.YNc(81,Q,5,0,"div",16),e.qZA(),e._UZ(82,"br"),e.TgZ(83,"div",10)(84,"div",11)(85,"label",34),e._uU(86,"Question:"),e.qZA(),e.TgZ(87,"select",35),e.YNc(88,x,2,2,"option",27),e.qZA()(),e.TgZ(89,"div",11)(90,"label",36),e._uU(91,"Answer:"),e.qZA(),e._UZ(92,"input",37),e.qZA(),e.YNc(93,k,5,0,"div",5),e.YNc(94,J,5,0,"div",5),e.qZA()(),e._UZ(95,"br")(96,"br")(97,"input",38),e.qZA()()(),e._UZ(98,"br"),e.TgZ(99,"a",39)(100,"button",40),e._uU(101,"Go Back"),e.qZA()(),e._UZ(102,"br")(103,"br")(104,"br")(105,"br")(106,"br")(107,"br")(108,"br")(109,"br")(110,"br")(111,"br")(112,"br")(113,"br"),e.qZA()()()),2&i&&(e.xp6(6),e.Q6J("ngIf",t.errorMessage),e.xp6(3),e.Q6J("formGroup",t.registerForm),e.xp6(16),e.Q6J("ngIf",t.registerForm.controls.firstName.touched&&t.registerForm.controls.firstName.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.lastName.touched&&t.registerForm.controls.lastName.hasError("required")),e.xp6(11),e.Q6J("ngIf",t.registerForm.controls.address.touched&&t.registerForm.controls.address.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.phoneNumber.touched&&t.registerForm.controls.phoneNumber.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.phoneNumber.touched&&t.registerForm.controls.phoneNumber.hasError("pattern")),e.xp6(11),e.Q6J("ngIf",t.registerForm.controls.email.touched&&t.registerForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.email.touched&&t.registerForm.controls.email.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.password.touched&&t.registerForm.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.password.touched&&t.registerForm.controls.password.hasError("pattern")),e.xp6(9),e.Q6J("ngForOf",t.qArr1),e.xp6(5),e.Q6J("ngIf",t.registerForm.controls.question1.invalid&&(t.registerForm.controls.question1.dirty||t.registerForm.controls.question1.touched)),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.answer1.invalid&&(t.registerForm.controls.answer1.dirty||t.registerForm.controls.answer1.touched)),e.xp6(7),e.Q6J("ngForOf",t.qArr2),e.xp6(5),e.Q6J("ngIf",t.registerForm.controls.question2.invalid&&(t.registerForm.controls.question2.dirty||t.registerForm.controls.question2.touched)),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.answer2.invalid&&(t.registerForm.controls.answer2.dirty||t.registerForm.controls.answer2.touched)),e.xp6(7),e.Q6J("ngForOf",t.qArr3),e.xp6(5),e.Q6J("ngIf",t.registerForm.controls.question3.invalid&&(t.registerForm.controls.question3.dirty||t.registerForm.controls.question3.touched)),e.xp6(1),e.Q6J("ngIf",t.registerForm.controls.answer3.invalid&&(t.registerForm.controls.answer3.dirty||t.registerForm.controls.answer3.touched)),e.xp6(3),e.Q6J("disabled",!t.registerForm.valid))},dependencies:[c.sg,c.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.sg,o.u,l.rH],styles:[".font-yellow[_ngcontent-%COMP%]{color:#ffd800}.bg-potter-yellow[_ngcontent-%COMP%]{background-color:#ffd800}.bg-black[_ngcontent-%COMP%]{background-color:#000}.extra-width[_ngcontent-%COMP%]{width:200px}"]}),s})();function P(r,s){if(1&r&&(e.TgZ(0,"div",8)(1,"div",18)(2,"div",19),e._uU(3),e.qZA()()()),2&r){const n=e.oxw();e.xp6(3),e.hij(" ",n.errorMessage," ")}}function L(r,s){1&r&&(e.TgZ(0,"div",20),e._uU(1," Password is required. "),e.qZA())}function M(r,s){1&r&&(e.TgZ(0,"div",7),e._uU(1," Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, and one number. "),e.qZA())}function R(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"Change Password"),e.qZA())}function E(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"span",21),e._uU(2," Loading... "),e.qZA())}let O=(()=>{var r;class s{constructor(i,t,a,m){this.fb=i,this.securityService=t,this.route=a,this.router=m,this.isLoading=!1,this.changePasswordForm=this.fb.group({password:[null,o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.email=this.route.snapshot.queryParamMap.get("email")??"",this.errorMessage="",this.email||(console.log("No email address found"),this.router.navigate(["/security/signin"]))}changePassword(){this.isLoading=!0,this.securityService.changePassword(this.email,this.changePasswordForm.controls.password.value).subscribe({next:t=>{console.log(t),this.router.navigate(["/security/signin"])},error:t=>{console.log(t),this.errorMessage=t,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.Y36(o.qu),e.Y36(g),e.Y36(l.gz),e.Y36(l.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-reset-password"]],decls:22,vars:7,consts:[[1,"contianer","mt-5"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-8","col-md-10"],[1,"card-shadow","p-4","bg-black"],[1,"form","row","g-3",3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"mb-3","form-group"],[1,"font-yellow"],[1,"row"],[1,"col-md-12"],["type","password","formControlName","password",1,"form-control","bg-potter-yellow"],["class","alert alert-danger mt-2",4,"ngIf"],["class","font-yellow",4,"ngIf"],[1,"col-md-6"],["type","submit","id","submit","value","Change Password",1,"btn","bg-potter-yellow","text-black",3,"disabled"],[4,"ngIf"],["routerLink","/",1,"text-underline-hover"],["mat-raised","","button","",1,"btn","bg-black","font-yellow"],[1,"col-12"],[1,"alert","alert-danger"],[1,"alert","alert-danger","mt-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return t.changePassword()}),e.YNc(5,P,4,1,"div",5),e.TgZ(6,"fieldset",6)(7,"legend",7),e._uU(8,"Enter Your New Password"),e.qZA(),e.TgZ(9,"div",8)(10,"div",9),e._UZ(11,"input",10),e.YNc(12,L,2,0,"div",11),e.YNc(13,M,2,0,"div",12),e.qZA()()(),e.TgZ(14,"div",13)(15,"button",14),e.YNc(16,R,2,0,"span",15),e.YNc(17,E,3,0,"div",15),e.qZA()()()(),e._UZ(18,"br"),e.TgZ(19,"a",16)(20,"button",17),e._uU(21,"Go Back"),e.qZA()()()()()),2&i&&(e.xp6(4),e.Q6J("formGroup",t.changePasswordForm),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(7),e.Q6J("ngIf",t.changePasswordForm.controls.password.invalid&&(t.changePasswordForm.controls.password.dirty||t.changePasswordForm.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.changePasswordForm.controls.password.hasError("pattern")),e.xp6(2),e.Q6J("disabled",!t.changePasswordForm.valid),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading))},dependencies:[c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,l.rH],styles:[".font-yellow[_ngcontent-%COMP%]{color:#ffd800}.bg-potter-yellow[_ngcontent-%COMP%]{background-color:#ffd800}.bg-black[_ngcontent-%COMP%]{background-color:#000}.extra-width[_ngcontent-%COMP%]{width:200px}.border-yellow[_ngcontent-%COMP%]{border:#FFD800}"]}),s})(),V=(()=>{var r;class s{}return(r=s).\u0275fac=function(i){return new(i||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-security"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2}),s})();var j=u(459);function B(r,s){if(1&r&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.hij(" ",n.errorMessage," ")}}function G(r,s){1&r&&(e.TgZ(0,"div")(1,"div",24),e._uU(2," Email is required. "),e._UZ(3,"input",25),e.qZA()())}function z(r,s){1&r&&(e.TgZ(0,"div")(1,"div",24),e._uU(2," Please enter a valid email address. "),e._UZ(3,"input",25),e.qZA()())}function $(r,s){1&r&&(e.TgZ(0,"div")(1,"div",24),e._uU(2," Password is required. "),e._UZ(3,"input",25),e.qZA()())}function W(r,s){1&r&&(e.TgZ(0,"div")(1,"div",24),e._uU(2," The password must be at least 8 characters in length and contain at least one uppercase letter, one lowercase letter, and one number. "),e._UZ(3,"input",25),e.qZA()())}function X(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"Sign in"),e.qZA())}function H(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"span",26),e._uU(2," Loading... "),e.qZA())}function K(r,s){if(1&r&&(e.TgZ(0,"div",9)(1,"div",17)(2,"div",18),e._uU(3),e.qZA()()()),2&r){const n=e.oxw();e.xp6(3),e.hij(" ",n.errorMessage," ")}}function ee(r,s){1&r&&(e.TgZ(0,"div",19),e._uU(1," Email is required. "),e.qZA())}function re(r,s){1&r&&(e.TgZ(0,"div"),e._uU(1," Email must be a valid email address. "),e.qZA())}function te(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"Verify Account"),e.qZA())}function oe(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"span",20),e._uU(2," Loading... "),e.qZA())}function se(r,s){if(1&r&&(e.TgZ(0,"div")(1,"div",19)(2,"div",20),e._uU(3),e.qZA()()()),2&r){const n=e.oxw();e.xp6(3),e.hij(" ",n.errorMessage," ")}}function ne(r,s){1&r&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2,"Loading..."),e.qZA()())}function ae(r,s){if(1&r&&(e.TgZ(0,"label",23),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Oqu(n.question1)}}function le(r,s){1&r&&(e.TgZ(0,"div",24),e._uU(1," Answer is required. "),e.qZA())}function ue(r,s){1&r&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2,"Loading..."),e.qZA()())}function de(r,s){if(1&r&&(e.TgZ(0,"label",25),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Oqu(n.question2)}}function ce(r,s){1&r&&(e.TgZ(0,"div",24),e._uU(1," Answer is required. "),e.qZA())}function me(r,s){1&r&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2,"Loading..."),e.qZA()())}function ge(r,s){if(1&r&&(e.TgZ(0,"label",23),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Oqu(n.question3)}}function pe(r,s){1&r&&(e.TgZ(0,"div",24),e._uU(1," Answer is required. "),e.qZA())}function fe(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"Verify Security Questions"),e.qZA())}function _e(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"span",26),e._uU(2," Loading... "),e.qZA())}const ve=[{path:"",component:V,title:"BCRS: Security",children:[{path:"signin",component:(()=>{var r;class s{constructor(i,t,a,m,d){this.fb=i,this.router=t,this.cookieService=a,this.secService=m,this.route=d,this.isLoading=!1,this.signinForm=this.fb.group({email:[null,o.kI.compose([o.kI.required,o.kI.email])],password:[null,o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.errorMessage=""}signin(){this.isLoading=!0,console.log("Sign in Form:",this.signinForm.value);let i=this.signinForm.controls.email.value,t=this.signinForm.controls.password.value;if(!i||!t)return this.errorMessage="Please provide an email address and password",void(this.isLoading=!1);this.secService.signin(i,t).subscribe({next:a=>{console.log("User:",a),this.cookieService.set("session_user",JSON.stringify({fullName:`${a.firstName} ${a.lastName}`,role:a.role,email:a.email}),1);const d=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([d])},error:a=>{this.isLoading=!1,console.log("err",a),401!==a.error.status||(this.errorMessage=a.message)}})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.Y36(o.qu),e.Y36(l.F0),e.Y36(j.N),e.Y36(g),e.Y36(l.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signin"]],decls:40,vars:9,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"card","shadow","bg-black"],[1,"card-title","text-center","border-bottom"],[1,"p-3","font-yellow"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["for","email",1,"form-labe","font-yellow"],["type","text","id","email","formControlName","email",1,"form-control","bg-potter-yellow"],[4,"ngIf"],["for","password",1,"form-labe","font-yellow"],["type","password","id","password","formControlName","password",1,"form-control","bg-potter-yellow"],[1,"d-grid"],["type","submit",1,"btn","bg-potter-yellow",3,"disabled"],[1,"row","mt-2"],[1,"col-md-6","text-center"],["routerLink","/security/register",1,"card-link","font-yellow","text-underline-hover"],["routerLink","/security/forgot-password",1,"card-link","font-yellow","text-underline-hover"],["routerLink","/",1,"font-yellow"],[1,"btn","bg-black","font-yellow"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6,"User Sign In"),e.qZA()(),e.YNc(7,B,2,1,"div",6),e.TgZ(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return t.signin(),t.signinForm.reset()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Email Address:"),e.qZA(),e._UZ(13,"input",11),e.qZA(),e.YNc(14,G,4,0,"div",12),e.YNc(15,z,4,0,"div",12),e.TgZ(16,"div",9)(17,"label",13),e._uU(18,"Password:"),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.YNc(20,$,4,0,"div",12),e.YNc(21,W,4,0,"div",12),e.TgZ(22,"div",15),e._UZ(23,"br"),e.TgZ(24,"button",16),e.YNc(25,X,2,0,"span",12),e.YNc(26,H,3,0,"div",12),e.qZA()(),e.TgZ(27,"div",17)(28,"div",18),e._UZ(29,"br"),e.TgZ(30,"a",19),e._uU(31,"Create New Account"),e.qZA()(),e.TgZ(32,"div",18),e._UZ(33,"br"),e.TgZ(34,"a",20),e._uU(35,"Forgot Password?"),e.qZA()()()()()(),e._UZ(36,"br"),e.TgZ(37,"a",21)(38,"button",22),e._uU(39,"Return Home"),e.qZA()()()()()),2&i&&(e.xp6(7),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.Q6J("formGroup",t.signinForm),e.xp6(5),e.Q6J("ngIf",t.signinForm.controls.email.touched&&t.signinForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.signinForm.controls.email.touched&&t.signinForm.controls.email.hasError("email")),e.xp6(5),e.Q6J("ngIf",t.signinForm.controls.password.touched&&t.signinForm.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.signinForm.controls.password.touched&&t.signinForm.controls.password.hasError("pattern")),e.xp6(3),e.Q6J("disabled",!t.signinForm.valid),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading))},dependencies:[c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,l.rH],styles:[".bg-potter-yellow[_ngcontent-%COMP%]{background-color:#ffd800}.font-yellow[_ngcontent-%COMP%]{color:#ffd800}"]}),s})(),title:"BCRS: Sign In"},{path:"register",component:Y,title:"BCRS: Register New User"},{path:"forgot-password",component:(()=>{var r;class s{constructor(i,t,a){this.fb=i,this.router=t,this.securityService=a,this.isLoading=!1,this.emailForm=this.fb.group({email:["",o.kI.compose([o.kI.required,o.kI.email])]}),this.errorMessage=""}verifyEmail(){this.isLoading=!0;const i=this.emailForm.controls.email.value;this.securityService.verifyEmail(i).subscribe({next:t=>{console.log(t),this.router.navigate(["security/verify-security-questions"],{queryParams:{email:i},skipLocationChange:!0})},error:t=>{console.log("Server Error from verifyEmail Call:",t),404!==t.status?(this.errorMessage="There was a problem verifying your email address. Please contact the system administrator.",this.isLoading=!1):this.errorMessage="The email address you entered was not found."},complete:()=>{this.isLoading=!1}})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.Y36(o.qu),e.Y36(l.F0),e.Y36(g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-verify-email"]],decls:24,vars:7,consts:[[1,"container","mt-5"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-8","col-md-10"],[1,"text-center","bg-potter-yellow"],["src","./assets/reset-password.png","width","80%","alt","Logo displaying a computer with text next to it that says Reset Password - Follow The Steps To Reset"],[1,"card","shadow","p-4","bg-black","font-yellow"],[1,"form","row","g-3",3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"mb-3","form-group"],[1,"row"],[1,"col-md-12"],["formControlName","email","type","text","id","email","name","email","required","",1,"form-control","bg-potter-yellow"],["class","alert alert-danger mt-2",4,"ngIf"],[4,"ngIf"],["type","submit","id","submit",1,"btn","btn-lg","bg-potter-yellow","text-black",3,"disabled"],["routerLink","/",1,"text-dark","text-underline-hover"],["mat-raised","","button","",1,"btn","bg-black","font-yellow"],[1,"col-12"],[1,"alert","alert-danger"],[1,"alert","alert-danger","mt-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",5)(7,"form",6),e.NdJ("ngSubmit",function(){return t.verifyEmail()}),e.YNc(8,K,4,1,"div",7),e.TgZ(9,"fieldset",8)(10,"legend"),e._uU(11,"Enter The Email Address Associated With Your Account"),e.qZA(),e.TgZ(12,"div",9)(13,"div",10),e._UZ(14,"input",11),e.YNc(15,ee,2,0,"div",12),e.YNc(16,re,2,0,"div",13),e.qZA()()(),e.TgZ(17,"button",14),e.YNc(18,te,2,0,"span",13),e.YNc(19,oe,3,0,"div",13),e.qZA()()(),e._UZ(20,"br"),e.TgZ(21,"a",15)(22,"button",16),e._uU(23,"Go Back"),e.qZA()()()()()),2&i&&(e.xp6(7),e.Q6J("formGroup",t.emailForm),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(7),e.Q6J("ngIf",t.emailForm.controls.email.invalid&&(t.emailForm.controls.email.dirty||t.emailForm.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",t.emailForm.controls.email.hasError("email")),e.xp6(1),e.Q6J("disabled",!t.emailForm.valid),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading))},dependencies:[c.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,l.rH],styles:[".font-yellow[_ngcontent-%COMP%]{color:#ffd800}.bg-black[_ngcontent-%COMP%]{background-color:#000}.bg-potter-yellow[_ngcontent-%COMP%]{background-color:#ffd800}a[_ngcontent-%COMP%]{color:#000}"]}),s})(),title:"BCRS: Verify Email"},{path:"verify-security-questions",component:(()=>{var r;class s{constructor(i,t,a,m){this.route=i,this.router=t,this.securityService=a,this.fb=m,this.sqForm=this.fb.group({answer1:["",o.kI.compose([o.kI.required])],answer2:["",o.kI.compose([o.kI.required])],answer3:["",o.kI.compose([o.kI.required])]}),this.selectedSecurityQuestions=[],this.question1="",this.question2="",this.question3="",this.errorMessage="",this.isLoadingLabels=!0,this.isLoadingSubmit=!1,this.email=this.route.snapshot.queryParamMap.get("email")??"",this.email?this.securityService.findSelectedSecurityQuestions(this.email).subscribe({next:d=>{this.selectedSecurityQuestions=d.selectedSecurityQuestions,console.log("Users selected security questions",this.selectedSecurityQuestions)},error:d=>{console.log("Server Error from findSelectedSecurityQuestion Call:",d),404!==d.status?(this.errorMessage="There was a problem verifying your security questions. Please try again.",this.isLoadingLabels=!1):this.errorMessage="The email address you entered was not found."},complete:()=>{this.question1=this.selectedSecurityQuestions[0].question,this.question2=this.selectedSecurityQuestions[1].question,this.question3=this.selectedSecurityQuestions[2].question,this.isLoadingLabels=!1}}):this.router.navigate(["/security/forgot-password"])}verifySecurityQuestions(){this.isLoadingSubmit=!0,console.log(this.sqForm.value);let i=[{question:this.question1,answer:this.sqForm.controls.answer1.value},{question:this.question2,answer:this.sqForm.controls.answer2.value},{question:this.question3,answer:this.sqForm.controls.answer3.value}];console.log("User provided security questions",i),this.securityService.verifySecurityQuestions(this.email,i).subscribe({next:t=>{console.log("Response from verifySecurityQuestions Call:",t),this.router.navigate(["/security/reset-password"],{queryParams:{email:this.email},skipLocationChange:!0})},error:t=>{if(t.error.message)return this.errorMessage=t.error.message,void console.error("Server Error from verifySecurityQuestions Call:",t.error.message);console.error("Server Error from verifySecurityQuestions Call:",t),this.errorMessage="There was a problem verifying your security questions. Please try again.",this.isLoadingSubmit=!1},complete:()=>{this.isLoadingSubmit=!1}})}}return(r=s).\u0275fac=function(i){return new(i||r)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(g),e.Y36(o.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-verify-security-questions"]],decls:36,vars:14,consts:[[1,"container","mt-5"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-8","col-md-10"],[1,"card","shadow","p-4","bg-black","font-yellow"],[1,"form","row","g-3",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"mb-3","form-group"],[1,"row"],[1,"col-md-12"],["class","spinner-border","role","status",4,"ngIf"],["for","q1","class","form-label",4,"ngIf"],["type","text","formControlName","answer1",1,"form-control","bg-potter-yellow"],["class","alert alert-danger mt-2",4,"ngIf"],["for","q2","class","form-label",4,"ngIf"],["type","text","formControlName","answer2",1,"form-control","bg-potter-yellow"],["type","text","formControlName","answer3",1,"form-control","bg-potter-yellow"],["type","submit","id","submit",1,"btn","btn-lg","bg-potter-yellow","text-black",3,"disabled"],["routerLink","/",1,"text-dark","text-underline-hover"],["mat-raised","","button","",1,"btn","bg-black","font-yellow"],[1,"col-12"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["for","q1",1,"form-label"],[1,"alert","alert-danger","mt-2"],["for","q2",1,"form-label"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return t.verifySecurityQuestions()}),e.YNc(5,se,4,1,"div",5),e.TgZ(6,"fieldset",6)(7,"legend"),e._uU(8,"Security Questions"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e.YNc(11,ne,3,0,"div",9),e.YNc(12,ae,2,1,"label",10),e._UZ(13,"input",11),e.YNc(14,le,2,0,"div",12),e.qZA()(),e._UZ(15,"br"),e.TgZ(16,"div",7)(17,"div",8),e.YNc(18,ue,3,0,"div",9),e.YNc(19,de,2,1,"label",13),e._UZ(20,"input",14),e.YNc(21,ce,2,0,"div",12),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"div",7)(24,"div",8),e.YNc(25,me,3,0,"div",9),e.YNc(26,ge,2,1,"label",10),e._UZ(27,"input",15),e.YNc(28,pe,2,0,"div",12),e.qZA()()(),e.TgZ(29,"button",16),e.YNc(30,fe,2,0,"span",5),e.YNc(31,_e,3,0,"div",5),e.qZA()()(),e._UZ(32,"br"),e.TgZ(33,"a",17)(34,"button",18),e._uU(35,"Go Back"),e.qZA()()()()()),2&i&&(e.xp6(4),e.Q6J("formGroup",t.sqForm),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(6),e.Q6J("ngIf",t.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!t.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",t.sqForm.controls.answer1.invalid&&(t.sqForm.controls.answer1.dirty||t.sqForm.controls.answer1.touched)),e.xp6(4),e.Q6J("ngIf",t.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!t.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",t.sqForm.controls.answer2.invalid&&(t.sqForm.controls.answer2.dirty||t.sqForm.controls.answer2.touched)),e.xp6(4),e.Q6J("ngIf",t.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!t.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",t.sqForm.controls.answer3.invalid&&(t.sqForm.controls.answer3.dirty||t.sqForm.controls.answer3.touched)),e.xp6(1),e.Q6J("disabled",!t.sqForm.valid),e.xp6(1),e.Q6J("ngIf",!t.isLoadingSubmit),e.xp6(1),e.Q6J("ngIf",t.isLoadingSubmit))},dependencies:[c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,l.rH],styles:[".font-yellow[_ngcontent-%COMP%]{color:#ffd800}.bg-black[_ngcontent-%COMP%]{background-color:#000}.bg-potter-yellow[_ngcontent-%COMP%]{background-color:#ffd800}"]}),s})(),title:"BCRS: Verify Security Questions"},{path:"reset-password",component:O,title:"BCRS: Reset Password"}]}];let be=(()=>{var r;class s{}return(r=s).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.Bz.forChild(ve),l.Bz]}),s})(),Ze=(()=>{var r;class s{}return(r=s).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,o.u5,f.JF,_.ot,o.UX,l.Bz,be]}),s})()}}]);